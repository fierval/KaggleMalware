open System
open System.Linq
open System.IO
open System.Collections.Generic

let path = @"c:\kaggle\malware\train"
let outPath = @"c:\kaggle\malware\sample"
let fraction = 0.2

Environment.CurrentDirectory <- path

if Directory.Exists outPath then 
    Directory.Delete (outPath, true)
    Directory.CreateDirectory outPath |> ignore

let rnd : Random = new Random (int DateTime.Now.Ticks)
let files = Directory.GetFiles(".")

let total = int (float files.Length * fraction)
let fileList : List<int> = new List<int>()

for i = 1 to total do
    let mutable nxt = rnd.Next(files.Length)
    
    while fileList.Contains nxt do
        nxt <- rnd.Next(files.Length)
    fileList.Add nxt

for i = 1 to fileList.Count do
    File.Copy(files.[i], Path.Combine(outPath, Path.GetFileName(files.[i])))
    
